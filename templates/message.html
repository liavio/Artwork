<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- bootstrap cdn -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <title>Message with {{user[0]}}</title>
  </head>
  <body>
    <!-- navbar for website-->
    <header class="p-5 text-bg-dark d-flex justify-content-between">
      <h1>ArtWork</h1>
      <div>
        <div class="justify-content-center">
          <a href="/createpost" class="btn btn-outline-light me-2">New Post</a>
          <a href="/profile" class="btn btn-warning">{{ me }}</a>
        </div>
      </div>
    </header>

<div d-flex justify-content-between>
<!-- left side holds artist information-->
  <div style="float:left; width:50%;">
    <div class="pb-1">
      <h1>Messaging:</h1>
    </div>
    <img src="../static/images/{{ user[4] }}" width="300px" height="auto" style="clip-path: circle()">
    <h2 style="margin-left: 30px;">{{user[0]}}</h2>
    <h5 style="margin-left: 30px">{{user[3]}}</h5>
  </div>
  <!-- right side is message list, use jinja python to pull from database-->
  <div style="float:left; width:50%; margin-left: 500px;">
    <div class="pb-3" style="overflow-y:auto; max-height: 600px;">
      {% if history.length == 0 %}
        <h1>Start a chat with {{ user[0] }}</h1>
      {% else %}
        {% for message in history %}
          {% if message[0] != user[0] %}
            <!-- if the message is coming to the user in session, left align + green-->
            <div class="bg-secondary text-white">
              <p><b>{{ user[0] }}</b>              <small> Sent: {{ message[3] }} </small></p>
              <p> {{ message[2] }}</p>
            </div>
          {% else %} <!-- https://getbootstrap.com/docs/5.3/utilities/position/ -->
            <!-- if the message is being sent by user in session, right align + blue-->
            <div class="bg-primary text-white">
              <p><b>{{ me }}</b>              <small> Sent: {{ message[3] }} </small></p>
              <p> {{ message[2] }}</p>
            </div>
          {%endif%}
        {%endfor%}
      {%endif%}
    </div>
    <!-- bottom of right will be form for entering messages-->

    <form class="fixed-bottom" action="/msg/{{user[0]}}" method="POST">
        <td>
            <div class="d-flex justify-content-end">
                <form>
                    <input type="" class="form-control" name="content" placeholder="" required>
                    <button>Send</button>
                </form>
            </div>
        </td>
    </form>
  </div>
</div>

<footer></footer>

</body>

</html>